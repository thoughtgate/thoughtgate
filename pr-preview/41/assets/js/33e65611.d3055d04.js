"use strict";(globalThis.webpackChunkthoughtgate_docs=globalThis.webpackChunkthoughtgate_docs||[]).push([[851],{1898(e,r,n){n.r(r),n.d(r,{assets:()=>o,contentTitle:()=>l,default:()=>a,frontMatter:()=>i,metadata:()=>s,toc:()=>c});const s=JSON.parse('{"id":"reference/error-codes","title":"Error Codes Reference","description":"ThoughtGate returns JSON-RPC 2.0 compliant errors.","source":"@site/docs/reference/error-codes.md","sourceDirName":"reference","slug":"/reference/error-codes","permalink":"/pr-preview/41/docs/reference/error-codes","draft":false,"unlisted":false,"editUrl":"https://github.com/thoughtgate/thoughtgate/tree/main/website/docs/reference/error-codes.md","tags":[],"version":"current","sidebarPosition":3,"frontMatter":{"sidebar_position":3},"sidebar":"docsSidebar","previous":{"title":"Policy Syntax Reference","permalink":"/pr-preview/41/docs/reference/policy-syntax"},"next":{"title":"Why ThoughtGate","permalink":"/pr-preview/41/docs/explanation/why-thoughtgate"}}');var d=n(4848),t=n(8453);const i={sidebar_position:3},l="Error Codes Reference",o={},c=[{value:"Standard JSON-RPC Errors",id:"standard-json-rpc-errors",level:2},{value:"ThoughtGate-Specific Errors",id:"thoughtgate-specific-errors",level:2},{value:"Upstream Errors (-32000 to -32002)",id:"upstream-errors--32000-to--32002",level:3},{value:"Policy Errors (-32003)",id:"policy-errors--32003",level:3},{value:"Approval Errors (-32007 to -32008)",id:"approval-errors--32007-to--32008",level:3},{value:"Rate Limiting (-32009)",id:"rate-limiting--32009",level:3},{value:"Service Errors (-32013)",id:"service-errors--32013",level:3},{value:"Error Response Format",id:"error-response-format",level:2},{value:"Handling Errors",id:"handling-errors",level:2},{value:"Retry-able Errors",id:"retry-able-errors",level:3},{value:"Non-Retry-able Errors",id:"non-retry-able-errors",level:3},{value:"Example Error Handling",id:"example-error-handling",level:2}];function h(e){const r={code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",p:"p",pre:"pre",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,t.R)(),...e.components};return(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)(r.header,{children:(0,d.jsx)(r.h1,{id:"error-codes-reference",children:"Error Codes Reference"})}),"\n",(0,d.jsx)(r.p,{children:"ThoughtGate returns JSON-RPC 2.0 compliant errors."}),"\n",(0,d.jsx)(r.h2,{id:"standard-json-rpc-errors",children:"Standard JSON-RPC Errors"}),"\n",(0,d.jsxs)(r.table,{children:[(0,d.jsx)(r.thead,{children:(0,d.jsxs)(r.tr,{children:[(0,d.jsx)(r.th,{children:"Code"}),(0,d.jsx)(r.th,{children:"Name"}),(0,d.jsx)(r.th,{children:"Description"})]})}),(0,d.jsxs)(r.tbody,{children:[(0,d.jsxs)(r.tr,{children:[(0,d.jsx)(r.td,{children:(0,d.jsx)(r.code,{children:"-32700"})}),(0,d.jsx)(r.td,{children:"Parse Error"}),(0,d.jsx)(r.td,{children:"Invalid JSON"})]}),(0,d.jsxs)(r.tr,{children:[(0,d.jsx)(r.td,{children:(0,d.jsx)(r.code,{children:"-32600"})}),(0,d.jsx)(r.td,{children:"Invalid Request"}),(0,d.jsx)(r.td,{children:"Not a valid JSON-RPC request"})]}),(0,d.jsxs)(r.tr,{children:[(0,d.jsx)(r.td,{children:(0,d.jsx)(r.code,{children:"-32601"})}),(0,d.jsx)(r.td,{children:"Method Not Found"}),(0,d.jsx)(r.td,{children:"Unknown method"})]}),(0,d.jsxs)(r.tr,{children:[(0,d.jsx)(r.td,{children:(0,d.jsx)(r.code,{children:"-32602"})}),(0,d.jsx)(r.td,{children:"Invalid Params"}),(0,d.jsx)(r.td,{children:"Invalid method parameters"})]}),(0,d.jsxs)(r.tr,{children:[(0,d.jsx)(r.td,{children:(0,d.jsx)(r.code,{children:"-32603"})}),(0,d.jsx)(r.td,{children:"Internal Error"}),(0,d.jsx)(r.td,{children:"Internal server error"})]})]})]}),"\n",(0,d.jsx)(r.h2,{id:"thoughtgate-specific-errors",children:"ThoughtGate-Specific Errors"}),"\n",(0,d.jsx)(r.h3,{id:"upstream-errors--32000-to--32002",children:"Upstream Errors (-32000 to -32002)"}),"\n",(0,d.jsxs)(r.table,{children:[(0,d.jsx)(r.thead,{children:(0,d.jsxs)(r.tr,{children:[(0,d.jsx)(r.th,{children:"Code"}),(0,d.jsx)(r.th,{children:"Name"}),(0,d.jsx)(r.th,{children:"Description"})]})}),(0,d.jsxs)(r.tbody,{children:[(0,d.jsxs)(r.tr,{children:[(0,d.jsx)(r.td,{children:(0,d.jsx)(r.code,{children:"-32000"})}),(0,d.jsx)(r.td,{children:"Upstream Connection Failed"}),(0,d.jsx)(r.td,{children:"Cannot connect to upstream server"})]}),(0,d.jsxs)(r.tr,{children:[(0,d.jsx)(r.td,{children:(0,d.jsx)(r.code,{children:"-32001"})}),(0,d.jsx)(r.td,{children:"Upstream Timeout"}),(0,d.jsx)(r.td,{children:"Upstream request timed out"})]}),(0,d.jsxs)(r.tr,{children:[(0,d.jsx)(r.td,{children:(0,d.jsx)(r.code,{children:"-32002"})}),(0,d.jsx)(r.td,{children:"Upstream Error"}),(0,d.jsx)(r.td,{children:"Upstream returned an error"})]})]})]}),"\n",(0,d.jsx)(r.h3,{id:"policy-errors--32003",children:"Policy Errors (-32003)"}),"\n",(0,d.jsxs)(r.table,{children:[(0,d.jsx)(r.thead,{children:(0,d.jsxs)(r.tr,{children:[(0,d.jsx)(r.th,{children:"Code"}),(0,d.jsx)(r.th,{children:"Name"}),(0,d.jsx)(r.th,{children:"Description"})]})}),(0,d.jsx)(r.tbody,{children:(0,d.jsxs)(r.tr,{children:[(0,d.jsx)(r.td,{children:(0,d.jsx)(r.code,{children:"-32003"})}),(0,d.jsx)(r.td,{children:"Policy Denied"}),(0,d.jsx)(r.td,{children:"Request denied by Cedar policy"})]})})]}),"\n",(0,d.jsx)(r.h3,{id:"approval-errors--32007-to--32008",children:"Approval Errors (-32007 to -32008)"}),"\n",(0,d.jsxs)(r.table,{children:[(0,d.jsx)(r.thead,{children:(0,d.jsxs)(r.tr,{children:[(0,d.jsx)(r.th,{children:"Code"}),(0,d.jsx)(r.th,{children:"Name"}),(0,d.jsx)(r.th,{children:"Description"})]})}),(0,d.jsxs)(r.tbody,{children:[(0,d.jsxs)(r.tr,{children:[(0,d.jsx)(r.td,{children:(0,d.jsx)(r.code,{children:"-32007"})}),(0,d.jsx)(r.td,{children:"Approval Rejected"}),(0,d.jsx)(r.td,{children:"Human rejected the request"})]}),(0,d.jsxs)(r.tr,{children:[(0,d.jsx)(r.td,{children:(0,d.jsx)(r.code,{children:"-32008"})}),(0,d.jsx)(r.td,{children:"Approval Timeout"}),(0,d.jsx)(r.td,{children:"Approval timed out"})]})]})]}),"\n",(0,d.jsx)(r.h3,{id:"rate-limiting--32009",children:"Rate Limiting (-32009)"}),"\n",(0,d.jsxs)(r.table,{children:[(0,d.jsx)(r.thead,{children:(0,d.jsxs)(r.tr,{children:[(0,d.jsx)(r.th,{children:"Code"}),(0,d.jsx)(r.th,{children:"Name"}),(0,d.jsx)(r.th,{children:"Description"})]})}),(0,d.jsx)(r.tbody,{children:(0,d.jsxs)(r.tr,{children:[(0,d.jsx)(r.td,{children:(0,d.jsx)(r.code,{children:"-32009"})}),(0,d.jsx)(r.td,{children:"Rate Limited"}),(0,d.jsx)(r.td,{children:"Too many requests"})]})})]}),"\n",(0,d.jsx)(r.h3,{id:"service-errors--32013",children:"Service Errors (-32013)"}),"\n",(0,d.jsxs)(r.table,{children:[(0,d.jsx)(r.thead,{children:(0,d.jsxs)(r.tr,{children:[(0,d.jsx)(r.th,{children:"Code"}),(0,d.jsx)(r.th,{children:"Name"}),(0,d.jsx)(r.th,{children:"Description"})]})}),(0,d.jsx)(r.tbody,{children:(0,d.jsxs)(r.tr,{children:[(0,d.jsx)(r.td,{children:(0,d.jsx)(r.code,{children:"-32013"})}),(0,d.jsx)(r.td,{children:"Service Unavailable"}),(0,d.jsx)(r.td,{children:"ThoughtGate not ready"})]})})]}),"\n",(0,d.jsx)(r.h2,{id:"error-response-format",children:"Error Response Format"}),"\n",(0,d.jsx)(r.pre,{children:(0,d.jsx)(r.code,{className:"language-json",children:'{\n  "jsonrpc": "2.0",\n  "error": {\n    "code": -32003,\n    "message": "Policy denied",\n    "data": {\n      "tool_name": "admin_console",\n      "reason": "Administrative tools are not permitted"\n    }\n  },\n  "id": 1\n}\n'})}),"\n",(0,d.jsx)(r.h2,{id:"handling-errors",children:"Handling Errors"}),"\n",(0,d.jsx)(r.h3,{id:"retry-able-errors",children:"Retry-able Errors"}),"\n",(0,d.jsx)(r.p,{children:"These errors may succeed on retry:"}),"\n",(0,d.jsxs)(r.ul,{children:["\n",(0,d.jsxs)(r.li,{children:[(0,d.jsx)(r.code,{children:"-32001"})," Upstream Timeout"]}),"\n",(0,d.jsxs)(r.li,{children:[(0,d.jsx)(r.code,{children:"-32008"})," Approval Timeout (if resubmitted)"]}),"\n",(0,d.jsxs)(r.li,{children:[(0,d.jsx)(r.code,{children:"-32009"})," Rate Limited (after backoff)"]}),"\n",(0,d.jsxs)(r.li,{children:[(0,d.jsx)(r.code,{children:"-32013"})," Service Unavailable"]}),"\n"]}),"\n",(0,d.jsx)(r.h3,{id:"non-retry-able-errors",children:"Non-Retry-able Errors"}),"\n",(0,d.jsx)(r.p,{children:"These errors will not succeed on retry:"}),"\n",(0,d.jsxs)(r.ul,{children:["\n",(0,d.jsxs)(r.li,{children:[(0,d.jsx)(r.code,{children:"-32003"})," Policy Denied"]}),"\n",(0,d.jsxs)(r.li,{children:[(0,d.jsx)(r.code,{children:"-32007"})," Approval Rejected"]}),"\n",(0,d.jsxs)(r.li,{children:[(0,d.jsx)(r.code,{children:"-32000"})," Upstream Connection Failed (unless upstream comes back)"]}),"\n"]}),"\n",(0,d.jsx)(r.h2,{id:"example-error-handling",children:"Example Error Handling"}),"\n",(0,d.jsx)(r.pre,{children:(0,d.jsx)(r.code,{className:"language-python",children:'import json\n\ndef handle_response(response):\n    data = json.loads(response)\n\n    if "error" in data:\n        code = data["error"]["code"]\n        message = data["error"]["message"]\n\n        if code == -32003:\n            print(f"Request denied by policy: {message}")\n        elif code == -32007:\n            print(f"Request rejected by human: {message}")\n        elif code == -32008:\n            print(f"Approval timed out: {message}")\n        elif code in [-32001, -32009, -32013]:\n            print(f"Temporary error, retrying: {message}")\n            # Implement retry logic\n        else:\n            print(f"Error {code}: {message}")\n    else:\n        return data["result"]\n'})})]})}function a(e={}){const{wrapper:r}={...(0,t.R)(),...e.components};return r?(0,d.jsx)(r,{...e,children:(0,d.jsx)(h,{...e})}):h(e)}},8453(e,r,n){n.d(r,{R:()=>i,x:()=>l});var s=n(6540);const d={},t=s.createContext(d);function i(e){const r=s.useContext(t);return s.useMemo(function(){return"function"==typeof e?e(r):{...r,...e}},[r,e])}function l(e){let r;return r=e.disableParentContext?"function"==typeof e.components?e.components(d):e.components||d:i(e.components),s.createElement(t.Provider,{value:r},e.children)}}}]);