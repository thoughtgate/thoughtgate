"use strict";(globalThis.webpackChunkthoughtgate_docs=globalThis.webpackChunkthoughtgate_docs||[]).push([[523],{4005(e,n,s){s.r(n),s.d(n,{assets:()=>t,contentTitle:()=>o,default:()=>a,frontMatter:()=>i,metadata:()=>r,toc:()=>l});const r=JSON.parse('{"id":"reference/supported-agents","title":"Supported Agents","description":"Complete reference for all MCP agent types supported by thoughtgate wrap, including config file locations, JSON formats, and special behaviors.","source":"@site/docs/reference/supported-agents.md","sourceDirName":"reference","slug":"/reference/supported-agents","permalink":"/pr-preview/56/docs/reference/supported-agents","draft":false,"unlisted":false,"editUrl":"https://github.com/thoughtgate/thoughtgate/tree/main/website/docs/reference/supported-agents.md","tags":[],"version":"current","sidebarPosition":3,"frontMatter":{"sidebar_position":3},"sidebar":"docsSidebar","previous":{"title":"Configuration Reference","permalink":"/pr-preview/56/docs/reference/configuration"},"next":{"title":"Policy Syntax Reference","permalink":"/pr-preview/56/docs/reference/policy-syntax"}}');var c=s(4848),d=s(8453);const i={sidebar_position:3},o="Supported Agents",t={},l=[{value:"Summary",id:"summary",level:2},{value:"Per-Agent Details",id:"per-agent-details",level:2},{value:"Claude Code",id:"claude-code",level:3},{value:"Claude Desktop",id:"claude-desktop",level:3},{value:"Cursor",id:"cursor",level:3},{value:"VS Code",id:"vs-code",level:3},{value:"Windsurf",id:"windsurf",level:3},{value:"Zed",id:"zed",level:3},{value:"Config Rewrite Mechanics",id:"config-rewrite-mechanics",level:2},{value:"Overriding Detection",id:"overriding-detection",level:2},{value:"Double-Wrap Prevention",id:"double-wrap-prevention",level:2},{value:"Config Backup and Restore",id:"config-backup-and-restore",level:2}];function h(e){const n={code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,d.R)(),...e.components};return(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)(n.header,{children:(0,c.jsx)(n.h1,{id:"supported-agents",children:"Supported Agents"})}),"\n",(0,c.jsxs)(n.p,{children:["Complete reference for all MCP agent types supported by ",(0,c.jsx)(n.code,{children:"thoughtgate wrap"}),", including config file locations, JSON formats, and special behaviors."]}),"\n",(0,c.jsx)(n.h2,{id:"summary",children:"Summary"}),"\n",(0,c.jsxs)(n.table,{children:[(0,c.jsx)(n.thead,{children:(0,c.jsxs)(n.tr,{children:[(0,c.jsx)(n.th,{children:"Agent"}),(0,c.jsx)(n.th,{children:"Command"}),(0,c.jsx)(n.th,{children:"Config Path (macOS)"}),(0,c.jsx)(n.th,{children:"Config Path (Linux)"}),(0,c.jsx)(n.th,{children:"JSON Key"}),(0,c.jsx)(n.th,{children:"Env Expansion"})]})}),(0,c.jsxs)(n.tbody,{children:[(0,c.jsxs)(n.tr,{children:[(0,c.jsx)(n.td,{children:"Claude Code"}),(0,c.jsxs)(n.td,{children:[(0,c.jsx)(n.code,{children:"claude"}),", ",(0,c.jsx)(n.code,{children:"claude-code"})]}),(0,c.jsxs)(n.td,{children:[(0,c.jsx)(n.code,{children:"~/.claude.json"})," + ",(0,c.jsx)(n.code,{children:".mcp.json"})]}),(0,c.jsx)(n.td,{children:"Same"}),(0,c.jsx)(n.td,{children:(0,c.jsx)(n.code,{children:"projects.<cwd>.mcpServers"})}),(0,c.jsxs)(n.td,{children:[(0,c.jsx)(n.code,{children:"${VAR}"}),", ",(0,c.jsx)(n.code,{children:"${VAR:-default}"})]})]}),(0,c.jsxs)(n.tr,{children:[(0,c.jsx)(n.td,{children:"Claude Desktop"}),(0,c.jsxs)(n.td,{children:[(0,c.jsx)(n.code,{children:"claude-desktop"}),", ",(0,c.jsx)(n.code,{children:"Claude.app"})]}),(0,c.jsx)(n.td,{children:(0,c.jsx)(n.code,{children:"~/Library/Application Support/Claude/claude_desktop_config.json"})}),(0,c.jsx)(n.td,{children:(0,c.jsx)(n.code,{children:"~/.config/Claude/claude_desktop_config.json"})}),(0,c.jsx)(n.td,{children:(0,c.jsx)(n.code,{children:"mcpServers"})}),(0,c.jsx)(n.td,{children:"None"})]}),(0,c.jsxs)(n.tr,{children:[(0,c.jsx)(n.td,{children:"Cursor"}),(0,c.jsx)(n.td,{children:(0,c.jsx)(n.code,{children:"cursor"})}),(0,c.jsxs)(n.td,{children:[(0,c.jsx)(n.code,{children:"~/.cursor/mcp.json"})," + ",(0,c.jsx)(n.code,{children:".cursor/mcp.json"})]}),(0,c.jsx)(n.td,{children:"Same"}),(0,c.jsx)(n.td,{children:(0,c.jsx)(n.code,{children:"mcpServers"})}),(0,c.jsx)(n.td,{children:"None"})]}),(0,c.jsxs)(n.tr,{children:[(0,c.jsx)(n.td,{children:"VS Code"}),(0,c.jsxs)(n.td,{children:[(0,c.jsx)(n.code,{children:"code"}),", ",(0,c.jsx)(n.code,{children:"code-insiders"})]}),(0,c.jsx)(n.td,{children:(0,c.jsx)(n.code,{children:".vscode/mcp.json"})}),(0,c.jsx)(n.td,{children:"Same"}),(0,c.jsx)(n.td,{children:(0,c.jsx)(n.code,{children:"servers"})}),(0,c.jsx)(n.td,{children:"None"})]}),(0,c.jsxs)(n.tr,{children:[(0,c.jsx)(n.td,{children:"Windsurf"}),(0,c.jsx)(n.td,{children:(0,c.jsx)(n.code,{children:"windsurf"})}),(0,c.jsx)(n.td,{children:(0,c.jsx)(n.code,{children:"~/.codeium/windsurf/mcp_config.json"})}),(0,c.jsx)(n.td,{children:"Same"}),(0,c.jsx)(n.td,{children:(0,c.jsx)(n.code,{children:"mcpServers"})}),(0,c.jsx)(n.td,{children:(0,c.jsx)(n.code,{children:"${env:VAR}"})})]}),(0,c.jsxs)(n.tr,{children:[(0,c.jsx)(n.td,{children:"Zed"}),(0,c.jsx)(n.td,{children:(0,c.jsx)(n.code,{children:"zed"})}),(0,c.jsx)(n.td,{children:(0,c.jsx)(n.code,{children:"~/.config/zed/settings.json"})}),(0,c.jsx)(n.td,{children:"Same"}),(0,c.jsx)(n.td,{children:(0,c.jsx)(n.code,{children:"context_servers"})}),(0,c.jsx)(n.td,{children:"None"})]})]})]}),"\n",(0,c.jsx)(n.h2,{id:"per-agent-details",children:"Per-Agent Details"}),"\n",(0,c.jsx)(n.h3,{id:"claude-code",children:"Claude Code"}),"\n",(0,c.jsx)(n.p,{children:(0,c.jsx)(n.strong,{children:"Config locations:"})}),"\n",(0,c.jsxs)(n.ol,{children:["\n",(0,c.jsxs)(n.li,{children:[(0,c.jsx)(n.strong,{children:"User config:"})," ",(0,c.jsx)(n.code,{children:"~/.claude.json"})," \u2014 per-project servers under ",(0,c.jsx)(n.code,{children:"projects.<cwd>.mcpServers"})]}),"\n",(0,c.jsxs)(n.li,{children:[(0,c.jsx)(n.strong,{children:"Project config:"})," ",(0,c.jsx)(n.code,{children:".mcp.json"})," in the working directory \u2014 merged with user config"]}),"\n"]}),"\n",(0,c.jsx)(n.p,{children:(0,c.jsxs)(n.strong,{children:["JSON structure (",(0,c.jsx)(n.code,{children:"~/.claude.json"}),"):"]})}),"\n",(0,c.jsx)(n.pre,{children:(0,c.jsx)(n.code,{className:"language-json",children:'{\n  "projects": {\n    "/Users/alice/my-project": {\n      "mcpServers": {\n        "filesystem": {\n          "type": "stdio",\n          "command": "npx",\n          "args": ["-y", "@modelcontextprotocol/server-filesystem", "/tmp"],\n          "env": { "NODE_ENV": "production" }\n        },\n        "notion": {\n          "type": "http",\n          "url": "https://mcp.notion.com/mcp"\n        }\n      },\n      "enabledMcpjsonServers": [],\n      "disabledMcpjsonServers": []\n    }\n  }\n}\n'})}),"\n",(0,c.jsx)(n.p,{children:(0,c.jsxs)(n.strong,{children:["JSON structure (",(0,c.jsx)(n.code,{children:".mcp.json"}),"):"]})}),"\n",(0,c.jsx)(n.pre,{children:(0,c.jsx)(n.code,{className:"language-json",children:'{\n  "mcpServers": {\n    "sqlite": {\n      "command": "uvx",\n      "args": ["mcp-server-sqlite", "--db-path", "${DB_PATH:-/tmp/dev.db}"]\n    }\n  }\n}\n'})}),"\n",(0,c.jsx)(n.p,{children:(0,c.jsx)(n.strong,{children:"Special behaviors:"})}),"\n",(0,c.jsxs)(n.ul,{children:["\n",(0,c.jsxs)(n.li,{children:["Non-stdio servers (",(0,c.jsx)(n.code,{children:'"type": "http"'}),", ",(0,c.jsx)(n.code,{children:'"type": "sse"'}),", ",(0,c.jsx)(n.code,{children:'"type": "webSocket"'}),") are ",(0,c.jsx)(n.strong,{children:"skipped"})," \u2014 ThoughtGate only wraps stdio servers"]}),"\n",(0,c.jsxs)(n.li,{children:[(0,c.jsx)(n.code,{children:".mcp.json"})," entries override ",(0,c.jsx)(n.code,{children:"~/.claude.json"})," entries by server ID"]}),"\n",(0,c.jsxs)(n.li,{children:[(0,c.jsx)(n.code,{children:"enabledMcpjsonServers"})," / ",(0,c.jsx)(n.code,{children:"disabledMcpjsonServers"})," arrays control which ",(0,c.jsx)(n.code,{children:".mcp.json"})," servers are active"]}),"\n",(0,c.jsxs)(n.li,{children:["Supports ",(0,c.jsx)(n.code,{children:"${VAR}"})," and ",(0,c.jsx)(n.code,{children:"${VAR:-default}"})," environment variable expansion in ",(0,c.jsx)(n.code,{children:"command"})," and ",(0,c.jsx)(n.code,{children:"args"})]}),"\n"]}),"\n",(0,c.jsx)(n.h3,{id:"claude-desktop",children:"Claude Desktop"}),"\n",(0,c.jsxs)(n.p,{children:[(0,c.jsx)(n.strong,{children:"Config location:"})," ",(0,c.jsx)(n.code,{children:"~/Library/Application Support/Claude/claude_desktop_config.json"})," (macOS) or ",(0,c.jsx)(n.code,{children:"~/.config/Claude/claude_desktop_config.json"})," (Linux)"]}),"\n",(0,c.jsx)(n.p,{children:(0,c.jsx)(n.strong,{children:"JSON structure:"})}),"\n",(0,c.jsx)(n.pre,{children:(0,c.jsx)(n.code,{className:"language-json",children:'{\n  "mcpServers": {\n    "filesystem": {\n      "command": "npx",\n      "args": ["-y", "@modelcontextprotocol/server-filesystem", "/tmp"],\n      "env": { "NODE_ENV": "production" }\n    }\n  }\n}\n'})}),"\n",(0,c.jsx)(n.p,{children:(0,c.jsx)(n.strong,{children:"Special behaviors:"})}),"\n",(0,c.jsxs)(n.ul,{children:["\n",(0,c.jsxs)(n.li,{children:["Auto-detected from ",(0,c.jsx)(n.code,{children:"Claude.app"})," in the command path or ",(0,c.jsx)(n.code,{children:"claude-desktop"})," basename"]}),"\n",(0,c.jsxs)(n.li,{children:["All servers under ",(0,c.jsx)(n.code,{children:"mcpServers"})," are treated as stdio"]}),"\n"]}),"\n",(0,c.jsx)(n.h3,{id:"cursor",children:"Cursor"}),"\n",(0,c.jsx)(n.p,{children:(0,c.jsx)(n.strong,{children:"Config locations:"})}),"\n",(0,c.jsxs)(n.ol,{children:["\n",(0,c.jsxs)(n.li,{children:[(0,c.jsx)(n.strong,{children:"Global:"})," ",(0,c.jsx)(n.code,{children:"~/.cursor/mcp.json"})]}),"\n",(0,c.jsxs)(n.li,{children:[(0,c.jsx)(n.strong,{children:"Project:"})," ",(0,c.jsx)(n.code,{children:".cursor/mcp.json"})," in the working directory"]}),"\n"]}),"\n",(0,c.jsx)(n.p,{children:(0,c.jsx)(n.strong,{children:"JSON structure:"})}),"\n",(0,c.jsx)(n.pre,{children:(0,c.jsx)(n.code,{className:"language-json",children:'{\n  "mcpServers": {\n    "sqlite": {\n      "command": "uvx",\n      "args": ["mcp-server-sqlite", "--db-path", "/tmp/test.db"]\n    }\n  }\n}\n'})}),"\n",(0,c.jsx)(n.p,{children:(0,c.jsx)(n.strong,{children:"Special behaviors:"})}),"\n",(0,c.jsxs)(n.ul,{children:["\n",(0,c.jsx)(n.li,{children:"Project-level entries override global entries by server ID"}),"\n",(0,c.jsxs)(n.li,{children:["Both files use the same ",(0,c.jsx)(n.code,{children:"mcpServers"})," key format"]}),"\n"]}),"\n",(0,c.jsx)(n.h3,{id:"vs-code",children:"VS Code"}),"\n",(0,c.jsxs)(n.p,{children:[(0,c.jsx)(n.strong,{children:"Config location:"})," ",(0,c.jsx)(n.code,{children:".vscode/mcp.json"})," in the workspace"]}),"\n",(0,c.jsx)(n.p,{children:(0,c.jsx)(n.strong,{children:"JSON structure:"})}),"\n",(0,c.jsx)(n.pre,{children:(0,c.jsx)(n.code,{className:"language-json",children:'{\n  "servers": {\n    "filesystem": {\n      "type": "stdio",\n      "command": "npx",\n      "args": ["-y", "@modelcontextprotocol/server-filesystem", "/tmp"]\n    },\n    "remote-api": {\n      "type": "sse",\n      "url": "http://api-server:8080/sse"\n    }\n  }\n}\n'})}),"\n",(0,c.jsx)(n.p,{children:(0,c.jsx)(n.strong,{children:"Special behaviors:"})}),"\n",(0,c.jsxs)(n.ul,{children:["\n",(0,c.jsxs)(n.li,{children:["Uses ",(0,c.jsx)(n.code,{children:"servers"})," key (not ",(0,c.jsx)(n.code,{children:"mcpServers"}),")"]}),"\n",(0,c.jsxs)(n.li,{children:["Each server has an explicit ",(0,c.jsx)(n.code,{children:"type"})," field"]}),"\n",(0,c.jsxs)(n.li,{children:[(0,c.jsxs)(n.strong,{children:["Only ",(0,c.jsx)(n.code,{children:'"type": "stdio"'})," servers are wrapped"]})," \u2014 SSE and other types are ignored"]}),"\n",(0,c.jsx)(n.li,{children:"No environment variable expansion"}),"\n"]}),"\n",(0,c.jsx)(n.h3,{id:"windsurf",children:"Windsurf"}),"\n",(0,c.jsxs)(n.p,{children:[(0,c.jsx)(n.strong,{children:"Config location:"})," ",(0,c.jsx)(n.code,{children:"~/.codeium/windsurf/mcp_config.json"})]}),"\n",(0,c.jsx)(n.p,{children:(0,c.jsx)(n.strong,{children:"JSON structure:"})}),"\n",(0,c.jsx)(n.pre,{children:(0,c.jsx)(n.code,{className:"language-json",children:'{\n  "mcpServers": {\n    "filesystem": {\n      "command": "npx",\n      "args": ["-y", "@modelcontextprotocol/server-filesystem", "${env:HOME}/documents"]\n    }\n  }\n}\n'})}),"\n",(0,c.jsx)(n.p,{children:(0,c.jsx)(n.strong,{children:"Special behaviors:"})}),"\n",(0,c.jsxs)(n.ul,{children:["\n",(0,c.jsxs)(n.li,{children:["Uses ",(0,c.jsx)(n.code,{children:"${env:VAR}"})," syntax for environment variable expansion (different from Claude Code's ",(0,c.jsx)(n.code,{children:"${VAR}"})," syntax)"]}),"\n",(0,c.jsxs)(n.li,{children:["Plain ",(0,c.jsx)(n.code,{children:"${VAR}"})," patterns without the ",(0,c.jsx)(n.code,{children:"env:"})," prefix are left unchanged"]}),"\n"]}),"\n",(0,c.jsx)(n.h3,{id:"zed",children:"Zed"}),"\n",(0,c.jsxs)(n.p,{children:[(0,c.jsx)(n.strong,{children:"Config location:"})," ",(0,c.jsx)(n.code,{children:"~/.config/zed/settings.json"})]}),"\n",(0,c.jsx)(n.p,{children:(0,c.jsx)(n.strong,{children:"JSON structure:"})}),"\n",(0,c.jsx)(n.pre,{children:(0,c.jsx)(n.code,{className:"language-json",children:'{\n  "context_servers": {\n    "filesystem": {\n      "command": {\n        "path": "npx",\n        "args": ["-y", "@modelcontextprotocol/server-filesystem", "/tmp"]\n      },\n      "env": { "NODE_ENV": "production" }\n    }\n  }\n}\n'})}),"\n",(0,c.jsx)(n.p,{children:(0,c.jsx)(n.strong,{children:"Special behaviors:"})}),"\n",(0,c.jsxs)(n.ul,{children:["\n",(0,c.jsxs)(n.li,{children:["Uses ",(0,c.jsx)(n.code,{children:"context_servers"})," key (unique naming)"]}),"\n",(0,c.jsxs)(n.li,{children:["Command is nested: ",(0,c.jsx)(n.code,{children:'{ "command": { "path": "...", "args": [...] } }'})," instead of ",(0,c.jsx)(n.code,{children:'{ "command": "...", "args": [...] }'})]}),"\n",(0,c.jsxs)(n.li,{children:["Also supports simple string commands: ",(0,c.jsx)(n.code,{children:'{ "command": "my-server" }'})]}),"\n"]}),"\n",(0,c.jsx)(n.h2,{id:"config-rewrite-mechanics",children:"Config Rewrite Mechanics"}),"\n",(0,c.jsxs)(n.p,{children:["When ",(0,c.jsx)(n.code,{children:"thoughtgate wrap"})," rewrites a config, each stdio server entry is transformed:"]}),"\n",(0,c.jsx)(n.p,{children:(0,c.jsx)(n.strong,{children:"Before:"})}),"\n",(0,c.jsx)(n.pre,{children:(0,c.jsx)(n.code,{className:"language-json",children:'{\n  "filesystem": {\n    "command": "npx",\n    "args": ["-y", "@modelcontextprotocol/server-filesystem", "/tmp"]\n  }\n}\n'})}),"\n",(0,c.jsx)(n.p,{children:(0,c.jsx)(n.strong,{children:"After:"})}),"\n",(0,c.jsx)(n.pre,{children:(0,c.jsx)(n.code,{className:"language-json",children:'{\n  "filesystem": {\n    "command": "/path/to/thoughtgate",\n    "args": [\n      "shim",\n      "--server-id", "filesystem",\n      "--governance-endpoint", "http://127.0.0.1:54321",\n      "--profile", "production",\n      "--",\n      "npx", "-y", "@modelcontextprotocol/server-filesystem", "/tmp"\n    ],\n    "env": {\n      "THOUGHTGATE_SERVER_ID": "filesystem"\n    }\n  }\n}\n'})}),"\n",(0,c.jsxs)(n.p,{children:["The original command and args are preserved after the ",(0,c.jsx)(n.code,{children:"--"})," separator, allowing the shim to spawn the original server process."]}),"\n",(0,c.jsx)(n.h2,{id:"overriding-detection",children:"Overriding Detection"}),"\n",(0,c.jsx)(n.p,{children:"If auto-detection fails or picks the wrong agent:"}),"\n",(0,c.jsx)(n.pre,{children:(0,c.jsx)(n.code,{className:"language-bash",children:"# Explicit agent type\nthoughtgate wrap --agent-type cursor -- /usr/local/bin/my-cursor-fork\n\n# Explicit config path\nthoughtgate wrap --config-path ~/custom/mcp.json -- claude-code\n\n# Both overrides (required for custom agents)\nthoughtgate wrap --agent-type custom --config-path ./mcp-config.json -- my-agent\n"})}),"\n",(0,c.jsx)(n.h2,{id:"double-wrap-prevention",children:"Double-Wrap Prevention"}),"\n",(0,c.jsxs)(n.p,{children:["ThoughtGate detects if a config has already been rewritten by checking if any server's ",(0,c.jsx)(n.code,{children:"command"})," points to the ",(0,c.jsx)(n.code,{children:"thoughtgate"})," binary. If detected, it exits with:"]}),"\n",(0,c.jsx)(n.pre,{children:(0,c.jsx)(n.code,{children:"Error: Config already managed by ThoughtGate \u2014 run the agent directly or restore with `thoughtgate unwrap`\n"})}),"\n",(0,c.jsxs)(n.p,{children:["The ",(0,c.jsx)(n.code,{children:"THOUGHTGATE_ACTIVE=1"})," environment variable also prevents nested wrapping at the process level."]}),"\n",(0,c.jsx)(n.h2,{id:"config-backup-and-restore",children:"Config Backup and Restore"}),"\n",(0,c.jsxs)(n.table,{children:[(0,c.jsx)(n.thead,{children:(0,c.jsxs)(n.tr,{children:[(0,c.jsx)(n.th,{children:"File"}),(0,c.jsx)(n.th,{children:"Purpose"})]})}),(0,c.jsxs)(n.tbody,{children:[(0,c.jsxs)(n.tr,{children:[(0,c.jsx)(n.td,{children:(0,c.jsx)(n.code,{children:"<config>.thoughtgate-backup"})}),(0,c.jsx)(n.td,{children:"Byte-for-byte copy of the original config. Created before rewrite, verified after copy."})]}),(0,c.jsxs)(n.tr,{children:[(0,c.jsx)(n.td,{children:(0,c.jsx)(n.code,{children:"<config>.thoughtgate-lock"})}),(0,c.jsx)(n.td,{children:"Advisory lock file preventing concurrent ThoughtGate instances from modifying the same config."})]})]})]}),"\n",(0,c.jsxs)(n.p,{children:["On exit (normal, SIGTERM, SIGINT, or panic), ThoughtGate automatically restores the original config from the backup file. Use ",(0,c.jsx)(n.code,{children:"--no-restore"})," to skip restoration."]})]})}function a(e={}){const{wrapper:n}={...(0,d.R)(),...e.components};return n?(0,c.jsx)(n,{...e,children:(0,c.jsx)(h,{...e})}):h(e)}},8453(e,n,s){s.d(n,{R:()=>i,x:()=>o});var r=s(6540);const c={},d=r.createContext(c);function i(e){const n=r.useContext(d);return r.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function o(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(c):e.components||c:i(e.components),r.createElement(d.Provider,{value:n},e.children)}}}]);