"use strict";(globalThis.webpackChunkthoughtgate_docs=globalThis.webpackChunkthoughtgate_docs||[]).push([[565],{8453(e,t,r){r.d(t,{R:()=>c,x:()=>i});var d=r(6540);const s={},n=d.createContext(s);function c(e){const t=d.useContext(n);return d.useMemo(function(){return"function"==typeof e?e(t):{...t,...e}},[t,e])}function i(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:c(e.components),d.createElement(n.Provider,{value:t},e.children)}},9893(e,t,r){r.r(t),r.d(t,{assets:()=>l,contentTitle:()=>i,default:()=>a,frontMatter:()=>c,metadata:()=>d,toc:()=>h});const d=JSON.parse('{"id":"reference/telemetry","title":"Telemetry Reference","description":"Complete reference for ThoughtGate telemetry: OTLP tracing, Prometheus metrics, and configuration.","source":"@site/docs/reference/telemetry.md","sourceDirName":"reference","slug":"/reference/telemetry","permalink":"/pr-preview/56/docs/reference/telemetry","draft":false,"unlisted":false,"editUrl":"https://github.com/thoughtgate/thoughtgate/tree/main/website/docs/reference/telemetry.md","tags":[],"version":"current","sidebarPosition":6,"frontMatter":{"sidebar_position":6},"sidebar":"docsSidebar","previous":{"title":"Error Codes Reference","permalink":"/pr-preview/56/docs/reference/error-codes"},"next":{"title":"Why ThoughtGate","permalink":"/pr-preview/56/docs/explanation/why-thoughtgate"}}');var s=r(4848),n=r(8453);const c={sidebar_position:6},i="Telemetry Reference",l={},h=[{value:"YAML Configuration",id:"yaml-configuration",level:2},{value:"Environment Variables",id:"environment-variables",level:2},{value:"W3C Trace Context Propagation",id:"w3c-trace-context-propagation",level:2},{value:"HTTP Mode (Sidecar)",id:"http-mode-sidecar",level:3},{value:"Stdio Mode (CLI Wrapper)",id:"stdio-mode-cli-wrapper",level:3},{value:"<code>propagate_upstream</code> Behavior",id:"propagate_upstream-behavior",level:3},{value:"Prometheus Metrics",id:"prometheus-metrics",level:2},{value:"Counters",id:"counters",level:3},{value:"Histograms",id:"histograms",level:3},{value:"Gauges",id:"gauges",level:3},{value:"Protocol Support Notes",id:"protocol-support-notes",level:2}];function o(e){const t={code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,n.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(t.header,{children:(0,s.jsx)(t.h1,{id:"telemetry-reference",children:"Telemetry Reference"})}),"\n",(0,s.jsx)(t.p,{children:"Complete reference for ThoughtGate telemetry: OTLP tracing, Prometheus metrics, and configuration."}),"\n",(0,s.jsx)(t.h2,{id:"yaml-configuration",children:"YAML Configuration"}),"\n",(0,s.jsxs)(t.p,{children:["Telemetry is configured in the ",(0,s.jsx)(t.code,{children:"telemetry"})," section of ",(0,s.jsx)(t.code,{children:"thoughtgate.yaml"}),":"]}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-yaml",children:'telemetry:\n  # Master enable/disable for OTLP trace export (default: false)\n  enabled: true\n\n  otlp:\n    # OTLP HTTP endpoint (only http/protobuf supported, no gRPC)\n    endpoint: "http://otel-collector:4318"\n    protocol: http/protobuf  # Only supported protocol\n\n  prometheus:\n    enabled: true  # Enable /metrics endpoint (default: true)\n\n  sampling:\n    strategy: head  # Only "head" sampling supported (no tail sampling)\n    success_sample_rate: 0.10  # Sample 10% of successful requests (0.0-1.0)\n\n  batch:\n    max_queue_size: 2048       # Max spans in export queue (default: 2048)\n    max_export_batch_size: 512 # Max spans per export batch (default: 512)\n    scheduled_delay_ms: 5000   # Delay between exports in ms (default: 5000)\n    export_timeout_ms: 30000   # Export timeout in ms (default: 30000)\n\n  resource:\n    service.name: my-thoughtgate        # OTLP service name\n    deployment.environment: staging     # Custom resource attribute\n\n  stdio:\n    # Preserve trace context when forwarding to upstream MCP servers.\n    # Default: false (strip _meta.traceparent/tracestate to avoid breaking strict servers)\n    propagate_upstream: false\n'})}),"\n",(0,s.jsx)(t.h2,{id:"environment-variables",children:"Environment Variables"}),"\n",(0,s.jsxs)(t.table,{children:[(0,s.jsx)(t.thead,{children:(0,s.jsxs)(t.tr,{children:[(0,s.jsx)(t.th,{children:"Variable"}),(0,s.jsx)(t.th,{children:"Default"}),(0,s.jsx)(t.th,{children:"Description"})]})}),(0,s.jsxs)(t.tbody,{children:[(0,s.jsxs)(t.tr,{children:[(0,s.jsx)(t.td,{children:(0,s.jsx)(t.code,{children:"THOUGHTGATE_TELEMETRY_ENABLED"})}),(0,s.jsx)(t.td,{children:(0,s.jsx)(t.code,{children:"false"})}),(0,s.jsxs)(t.td,{children:["Master switch for OTLP trace export. Overrides ",(0,s.jsx)(t.code,{children:"telemetry.enabled"})," in YAML."]})]}),(0,s.jsxs)(t.tr,{children:[(0,s.jsx)(t.td,{children:(0,s.jsx)(t.code,{children:"OTEL_EXPORTER_OTLP_ENDPOINT"})}),(0,s.jsx)(t.td,{children:"\u2014"}),(0,s.jsxs)(t.td,{children:["OTLP HTTP endpoint URL. Overrides ",(0,s.jsx)(t.code,{children:"telemetry.otlp.endpoint"}),"."]})]}),(0,s.jsxs)(t.tr,{children:[(0,s.jsx)(t.td,{children:(0,s.jsx)(t.code,{children:"OTEL_SERVICE_NAME"})}),(0,s.jsx)(t.td,{children:(0,s.jsx)(t.code,{children:"thoughtgate"})}),(0,s.jsxs)(t.td,{children:["Service name for OTLP resource. Overrides ",(0,s.jsx)(t.code,{children:"telemetry.resource.service.name"}),"."]})]}),(0,s.jsxs)(t.tr,{children:[(0,s.jsx)(t.td,{children:(0,s.jsx)(t.code,{children:"K8S_NAMESPACE"})}),(0,s.jsx)(t.td,{children:"\u2014"}),(0,s.jsx)(t.td,{children:"Kubernetes namespace (added as resource attribute)."})]}),(0,s.jsxs)(t.tr,{children:[(0,s.jsx)(t.td,{children:(0,s.jsx)(t.code,{children:"K8S_POD_NAME"})}),(0,s.jsx)(t.td,{children:"\u2014"}),(0,s.jsx)(t.td,{children:"Kubernetes pod name (added as resource attribute)."})]}),(0,s.jsxs)(t.tr,{children:[(0,s.jsx)(t.td,{children:(0,s.jsx)(t.code,{children:"K8S_NODE_NAME"})}),(0,s.jsx)(t.td,{children:"\u2014"}),(0,s.jsx)(t.td,{children:"Kubernetes node name (added as resource attribute)."})]}),(0,s.jsxs)(t.tr,{children:[(0,s.jsx)(t.td,{children:(0,s.jsx)(t.code,{children:"DEPLOY_ENV"})}),(0,s.jsx)(t.td,{children:"\u2014"}),(0,s.jsx)(t.td,{children:"Deployment environment (added as resource attribute)."})]})]})]}),"\n",(0,s.jsx)(t.h2,{id:"w3c-trace-context-propagation",children:"W3C Trace Context Propagation"}),"\n",(0,s.jsx)(t.p,{children:"ThoughtGate propagates W3C Trace Context across both transport modes."}),"\n",(0,s.jsx)(t.h3,{id:"http-mode-sidecar",children:"HTTP Mode (Sidecar)"}),"\n",(0,s.jsx)(t.p,{children:"Standard HTTP header propagation:"}),"\n",(0,s.jsxs)(t.table,{children:[(0,s.jsx)(t.thead,{children:(0,s.jsxs)(t.tr,{children:[(0,s.jsx)(t.th,{children:"Header"}),(0,s.jsx)(t.th,{children:"Description"})]})}),(0,s.jsxs)(t.tbody,{children:[(0,s.jsxs)(t.tr,{children:[(0,s.jsx)(t.td,{children:(0,s.jsx)(t.code,{children:"traceparent"})}),(0,s.jsx)(t.td,{children:"W3C Trace Context trace-parent header"})]}),(0,s.jsxs)(t.tr,{children:[(0,s.jsx)(t.td,{children:(0,s.jsx)(t.code,{children:"tracestate"})}),(0,s.jsx)(t.td,{children:"W3C Trace Context trace-state header"})]}),(0,s.jsxs)(t.tr,{children:[(0,s.jsx)(t.td,{children:(0,s.jsx)(t.code,{children:"baggage"})}),(0,s.jsx)(t.td,{children:"W3C Baggage header"})]})]})]}),"\n",(0,s.jsxs)(t.p,{children:["Incoming ",(0,s.jsx)(t.code,{children:"traceparent"})," headers are parsed and used as the parent span. If absent, ThoughtGate generates a new trace ID."]}),"\n",(0,s.jsx)(t.h3,{id:"stdio-mode-cli-wrapper",children:"Stdio Mode (CLI Wrapper)"}),"\n",(0,s.jsxs)(t.p,{children:["Since stdio transport has no HTTP headers, trace context is embedded in JSON-RPC ",(0,s.jsx)(t.code,{children:"params._meta"}),":"]}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-json",children:'{\n  "jsonrpc": "2.0",\n  "id": 1,\n  "method": "tools/call",\n  "params": {\n    "name": "read_file",\n    "arguments": { "path": "/tmp/test.txt" },\n    "_meta": {\n      "traceparent": "00-4bf92f3577b34da6a3ce929d0e0e4736-00f067aa0ba902b7-01",\n      "tracestate": "congo=t61rcWkgMzE",\n      "baggage": "userId=alice"\n    }\n  }\n}\n'})}),"\n",(0,s.jsxs)(t.h3,{id:"propagate_upstream-behavior",children:[(0,s.jsx)(t.code,{children:"propagate_upstream"})," Behavior"]}),"\n",(0,s.jsxs)(t.table,{children:[(0,s.jsx)(t.thead,{children:(0,s.jsxs)(t.tr,{children:[(0,s.jsx)(t.th,{children:"Setting"}),(0,s.jsx)(t.th,{children:"Behavior"})]})}),(0,s.jsxs)(t.tbody,{children:[(0,s.jsxs)(t.tr,{children:[(0,s.jsxs)(t.td,{children:[(0,s.jsx)(t.code,{children:"false"})," (default)"]}),(0,s.jsxs)(t.td,{children:["Strip ",(0,s.jsx)(t.code,{children:"_meta.traceparent"}),", ",(0,s.jsx)(t.code,{children:"_meta.tracestate"}),", and ",(0,s.jsx)(t.code,{children:"_meta.baggage"})," before forwarding to upstream MCP servers. Prevents breaking strict schema validators."]})]}),(0,s.jsxs)(t.tr,{children:[(0,s.jsx)(t.td,{children:(0,s.jsx)(t.code,{children:"true"})}),(0,s.jsx)(t.td,{children:"Preserve trace context fields when forwarding. Use when upstream servers are trace-aware."})]})]})]}),"\n",(0,s.jsxs)(t.p,{children:["When ",(0,s.jsx)(t.code,{children:"propagate_upstream: false"}),", ThoughtGate still records the extracted trace context in its own spans \u2014 it only strips the fields from the forwarded message."]}),"\n",(0,s.jsx)(t.h2,{id:"prometheus-metrics",children:"Prometheus Metrics"}),"\n",(0,s.jsxs)(t.p,{children:["All metrics are exported on ",(0,s.jsx)(t.code,{children:"GET /metrics"})," (admin port, default 7469) in OpenMetrics text format."]}),"\n",(0,s.jsx)(t.h3,{id:"counters",children:"Counters"}),"\n",(0,s.jsxs)(t.table,{children:[(0,s.jsx)(t.thead,{children:(0,s.jsxs)(t.tr,{children:[(0,s.jsx)(t.th,{children:"Metric"}),(0,s.jsx)(t.th,{children:"Labels"}),(0,s.jsx)(t.th,{children:"Description"})]})}),(0,s.jsxs)(t.tbody,{children:[(0,s.jsxs)(t.tr,{children:[(0,s.jsx)(t.td,{children:(0,s.jsx)(t.code,{children:"thoughtgate_requests_total"})}),(0,s.jsxs)(t.td,{children:[(0,s.jsx)(t.code,{children:"method"}),", ",(0,s.jsx)(t.code,{children:"tool_name"}),", ",(0,s.jsx)(t.code,{children:"status"})]}),(0,s.jsx)(t.td,{children:"Total requests processed"})]}),(0,s.jsxs)(t.tr,{children:[(0,s.jsx)(t.td,{children:(0,s.jsx)(t.code,{children:"thoughtgate_gate_decisions_total"})}),(0,s.jsxs)(t.td,{children:[(0,s.jsx)(t.code,{children:"gate"}),", ",(0,s.jsx)(t.code,{children:"outcome"})]}),(0,s.jsx)(t.td,{children:"Gate evaluation decisions"})]}),(0,s.jsxs)(t.tr,{children:[(0,s.jsx)(t.td,{children:(0,s.jsx)(t.code,{children:"thoughtgate_errors_total"})}),(0,s.jsxs)(t.td,{children:[(0,s.jsx)(t.code,{children:"error_type"}),", ",(0,s.jsx)(t.code,{children:"method"})]}),(0,s.jsx)(t.td,{children:"Errors by type and method"})]}),(0,s.jsxs)(t.tr,{children:[(0,s.jsx)(t.td,{children:(0,s.jsx)(t.code,{children:"thoughtgate_cedar_evaluations_total"})}),(0,s.jsxs)(t.td,{children:[(0,s.jsx)(t.code,{children:"decision"}),", ",(0,s.jsx)(t.code,{children:"policy_id"})]}),(0,s.jsx)(t.td,{children:"Cedar policy evaluations"})]}),(0,s.jsxs)(t.tr,{children:[(0,s.jsx)(t.td,{children:(0,s.jsx)(t.code,{children:"thoughtgate_approval_requests_total"})}),(0,s.jsxs)(t.td,{children:[(0,s.jsx)(t.code,{children:"channel"}),", ",(0,s.jsx)(t.code,{children:"outcome"})]}),(0,s.jsx)(t.td,{children:"Approval workflow outcomes"})]}),(0,s.jsxs)(t.tr,{children:[(0,s.jsx)(t.td,{children:(0,s.jsx)(t.code,{children:"thoughtgate_upstream_requests_total"})}),(0,s.jsxs)(t.td,{children:[(0,s.jsx)(t.code,{children:"target"}),", ",(0,s.jsx)(t.code,{children:"status_code"})]}),(0,s.jsx)(t.td,{children:"Upstream HTTP requests"})]}),(0,s.jsxs)(t.tr,{children:[(0,s.jsx)(t.td,{children:(0,s.jsx)(t.code,{children:"thoughtgate_tasks_created_total"})}),(0,s.jsx)(t.td,{children:(0,s.jsx)(t.code,{children:"task_type"})}),(0,s.jsx)(t.td,{children:"Tasks created"})]}),(0,s.jsxs)(t.tr,{children:[(0,s.jsx)(t.td,{children:(0,s.jsx)(t.code,{children:"thoughtgate_tasks_completed_total"})}),(0,s.jsxs)(t.td,{children:[(0,s.jsx)(t.code,{children:"task_type"}),", ",(0,s.jsx)(t.code,{children:"outcome"})]}),(0,s.jsx)(t.td,{children:"Tasks completed"})]}),(0,s.jsxs)(t.tr,{children:[(0,s.jsx)(t.td,{children:(0,s.jsx)(t.code,{children:"thoughtgate_telemetry_dropped_total"})}),(0,s.jsx)(t.td,{children:(0,s.jsx)(t.code,{children:"signal"})}),(0,s.jsx)(t.td,{children:"Telemetry signals dropped (queue full)"})]}),(0,s.jsxs)(t.tr,{children:[(0,s.jsx)(t.td,{children:(0,s.jsx)(t.code,{children:"thoughtgate_stdio_messages_total"})}),(0,s.jsxs)(t.td,{children:[(0,s.jsx)(t.code,{children:"server_id"}),", ",(0,s.jsx)(t.code,{children:"direction"}),", ",(0,s.jsx)(t.code,{children:"method"})]}),(0,s.jsx)(t.td,{children:"Stdio transport messages"})]}),(0,s.jsxs)(t.tr,{children:[(0,s.jsx)(t.td,{children:(0,s.jsx)(t.code,{children:"thoughtgate_stdio_governance_decisions_total"})}),(0,s.jsxs)(t.td,{children:[(0,s.jsx)(t.code,{children:"server_id"}),", ",(0,s.jsx)(t.code,{children:"decision"}),", ",(0,s.jsx)(t.code,{children:"profile"})]}),(0,s.jsx)(t.td,{children:"Stdio governance decisions"})]}),(0,s.jsxs)(t.tr,{children:[(0,s.jsx)(t.td,{children:(0,s.jsx)(t.code,{children:"thoughtgate_stdio_framing_errors_total"})}),(0,s.jsxs)(t.td,{children:[(0,s.jsx)(t.code,{children:"server_id"}),", ",(0,s.jsx)(t.code,{children:"error_type"})]}),(0,s.jsx)(t.td,{children:"Stdio framing/parse errors"})]}),(0,s.jsxs)(t.tr,{children:[(0,s.jsx)(t.td,{children:(0,s.jsx)(t.code,{children:"thoughtgate_green_bytes_total"})}),(0,s.jsx)(t.td,{children:(0,s.jsx)(t.code,{children:"direction"})}),(0,s.jsx)(t.td,{children:"Green path bytes transferred"})]}),(0,s.jsxs)(t.tr,{children:[(0,s.jsx)(t.td,{children:(0,s.jsx)(t.code,{children:"thoughtgate_green_streams_total"})}),(0,s.jsx)(t.td,{children:(0,s.jsx)(t.code,{children:"outcome"})}),(0,s.jsx)(t.td,{children:"Green path stream outcomes"})]}),(0,s.jsxs)(t.tr,{children:[(0,s.jsx)(t.td,{children:(0,s.jsx)(t.code,{children:"thoughtgate_amber_decisions_total"})}),(0,s.jsx)(t.td,{children:(0,s.jsx)(t.code,{children:"decision"})}),(0,s.jsx)(t.td,{children:"Amber path inspection decisions"})]}),(0,s.jsxs)(t.tr,{children:[(0,s.jsx)(t.td,{children:(0,s.jsx)(t.code,{children:"thoughtgate_amber_errors_total"})}),(0,s.jsx)(t.td,{children:(0,s.jsx)(t.code,{children:"error_type"})}),(0,s.jsx)(t.td,{children:"Amber path errors"})]}),(0,s.jsxs)(t.tr,{children:[(0,s.jsx)(t.td,{children:(0,s.jsx)(t.code,{children:"thoughtgate_pipeline_failures_total"})}),(0,s.jsx)(t.td,{children:(0,s.jsx)(t.code,{children:"stage"})}),(0,s.jsx)(t.td,{children:"Governance pipeline stage failures"})]})]})]}),"\n",(0,s.jsx)(t.h3,{id:"histograms",children:"Histograms"}),"\n",(0,s.jsxs)(t.table,{children:[(0,s.jsx)(t.thead,{children:(0,s.jsxs)(t.tr,{children:[(0,s.jsx)(t.th,{children:"Metric"}),(0,s.jsx)(t.th,{children:"Labels"}),(0,s.jsx)(t.th,{children:"Buckets"}),(0,s.jsx)(t.th,{children:"Description"})]})}),(0,s.jsxs)(t.tbody,{children:[(0,s.jsxs)(t.tr,{children:[(0,s.jsx)(t.td,{children:(0,s.jsx)(t.code,{children:"thoughtgate_request_duration_ms"})}),(0,s.jsxs)(t.td,{children:[(0,s.jsx)(t.code,{children:"method"}),", ",(0,s.jsx)(t.code,{children:"tool_name"})]}),(0,s.jsx)(t.td,{children:"0.5, 1, 2, 5, 10, 25, 50, 100, 250, 500, 1000"}),(0,s.jsx)(t.td,{children:"Request duration in milliseconds"})]}),(0,s.jsxs)(t.tr,{children:[(0,s.jsx)(t.td,{children:(0,s.jsx)(t.code,{children:"thoughtgate_cedar_eval_duration_ms"})}),(0,s.jsx)(t.td,{children:(0,s.jsx)(t.code,{children:"decision"})}),(0,s.jsx)(t.td,{children:"0.01, 0.05, 0.1, 0.25, 0.5, 1, 5, 10"}),(0,s.jsx)(t.td,{children:"Cedar evaluation duration in ms"})]}),(0,s.jsxs)(t.tr,{children:[(0,s.jsx)(t.td,{children:(0,s.jsx)(t.code,{children:"thoughtgate_upstream_duration_ms"})}),(0,s.jsx)(t.td,{children:(0,s.jsx)(t.code,{children:"target"})}),(0,s.jsx)(t.td,{children:"1, 5, 10, 25, 50, 100, 250, 500, 1000, 5000, 10000"}),(0,s.jsx)(t.td,{children:"Upstream round-trip duration in ms"})]}),(0,s.jsxs)(t.tr,{children:[(0,s.jsx)(t.td,{children:(0,s.jsx)(t.code,{children:"thoughtgate_approval_duration_seconds"})}),(0,s.jsx)(t.td,{children:(0,s.jsx)(t.code,{children:"channel"})}),(0,s.jsx)(t.td,{children:"1, 5, 10, 30, 60, 120, 300, 600"}),(0,s.jsx)(t.td,{children:"Time from approval request to decision"})]}),(0,s.jsxs)(t.tr,{children:[(0,s.jsx)(t.td,{children:(0,s.jsx)(t.code,{children:"thoughtgate_task_duration_seconds"})}),(0,s.jsx)(t.td,{children:(0,s.jsx)(t.code,{children:"task_type"})}),(0,s.jsx)(t.td,{children:"0.1, 1, 5, 10, 30, 60, 120, 300"}),(0,s.jsx)(t.td,{children:"Task lifetime duration"})]}),(0,s.jsxs)(t.tr,{children:[(0,s.jsx)(t.td,{children:(0,s.jsx)(t.code,{children:"thoughtgate_payload_size_bytes"})}),(0,s.jsxs)(t.td,{children:[(0,s.jsx)(t.code,{children:"direction"}),", ",(0,s.jsx)(t.code,{children:"method"})]}),(0,s.jsx)(t.td,{children:"64, 256, 1024, 4096, 16384, 65536, 262144, 1048576"}),(0,s.jsx)(t.td,{children:"Request/response payload size"})]}),(0,s.jsxs)(t.tr,{children:[(0,s.jsx)(t.td,{children:(0,s.jsx)(t.code,{children:"thoughtgate_green_ttfb_ms"})}),(0,s.jsx)(t.td,{children:"\u2014"}),(0,s.jsx)(t.td,{children:"0.5, 1, 2, 5, 10, 25, 50"}),(0,s.jsx)(t.td,{children:"Green path time to first byte"})]}),(0,s.jsxs)(t.tr,{children:[(0,s.jsx)(t.td,{children:(0,s.jsx)(t.code,{children:"thoughtgate_amber_inspector_duration_ms"})}),(0,s.jsx)(t.td,{children:(0,s.jsx)(t.code,{children:"inspector_name"})}),(0,s.jsx)(t.td,{children:"0.1, 0.5, 1, 5, 10, 50, 100"}),(0,s.jsx)(t.td,{children:"Per-inspector execution time"})]}),(0,s.jsxs)(t.tr,{children:[(0,s.jsx)(t.td,{children:(0,s.jsx)(t.code,{children:"thoughtgate_amber_buffer_bytes"})}),(0,s.jsx)(t.td,{children:"\u2014"}),(0,s.jsx)(t.td,{children:"1024, 4096, 16384, 65536, 262144, 1048576"}),(0,s.jsx)(t.td,{children:"Amber path buffer size"})]}),(0,s.jsxs)(t.tr,{children:[(0,s.jsx)(t.td,{children:(0,s.jsx)(t.code,{children:"thoughtgate_stdio_governance_duration_ms"})}),(0,s.jsx)(t.td,{children:(0,s.jsx)(t.code,{children:"server_id"})}),(0,s.jsx)(t.td,{children:"0.1, 0.5, 1, 5, 10, 50, 100"}),(0,s.jsx)(t.td,{children:"Stdio governance evaluation duration"})]}),(0,s.jsxs)(t.tr,{children:[(0,s.jsx)(t.td,{children:(0,s.jsx)(t.code,{children:"thoughtgate_stdio_e2e_latency_ms"})}),(0,s.jsx)(t.td,{children:(0,s.jsx)(t.code,{children:"server_id"})}),(0,s.jsx)(t.td,{children:"0.5, 1, 2, 5, 10, 25, 50, 100, 250"}),(0,s.jsx)(t.td,{children:"Stdio end-to-end message latency"})]})]})]}),"\n",(0,s.jsx)(t.h3,{id:"gauges",children:"Gauges"}),"\n",(0,s.jsxs)(t.table,{children:[(0,s.jsx)(t.thead,{children:(0,s.jsxs)(t.tr,{children:[(0,s.jsx)(t.th,{children:"Metric"}),(0,s.jsx)(t.th,{children:"Labels"}),(0,s.jsx)(t.th,{children:"Description"})]})}),(0,s.jsxs)(t.tbody,{children:[(0,s.jsxs)(t.tr,{children:[(0,s.jsx)(t.td,{children:(0,s.jsx)(t.code,{children:"thoughtgate_connections_active"})}),(0,s.jsx)(t.td,{children:(0,s.jsx)(t.code,{children:"transport"})}),(0,s.jsx)(t.td,{children:"Active connections by transport type"})]}),(0,s.jsxs)(t.tr,{children:[(0,s.jsx)(t.td,{children:(0,s.jsx)(t.code,{children:"thoughtgate_tasks_pending"})}),(0,s.jsx)(t.td,{children:(0,s.jsx)(t.code,{children:"task_type"})}),(0,s.jsx)(t.td,{children:"Currently pending tasks"})]}),(0,s.jsxs)(t.tr,{children:[(0,s.jsx)(t.td,{children:(0,s.jsx)(t.code,{children:"thoughtgate_cedar_policies_loaded"})}),(0,s.jsx)(t.td,{children:"\u2014"}),(0,s.jsx)(t.td,{children:"Number of Cedar policies loaded"})]}),(0,s.jsxs)(t.tr,{children:[(0,s.jsx)(t.td,{children:(0,s.jsx)(t.code,{children:"thoughtgate_uptime_seconds"})}),(0,s.jsx)(t.td,{children:"\u2014"}),(0,s.jsx)(t.td,{children:"Process uptime"})]}),(0,s.jsxs)(t.tr,{children:[(0,s.jsx)(t.td,{children:(0,s.jsx)(t.code,{children:"thoughtgate_green_streams_active"})}),(0,s.jsx)(t.td,{children:"\u2014"}),(0,s.jsx)(t.td,{children:"Active green path streams"})]}),(0,s.jsxs)(t.tr,{children:[(0,s.jsx)(t.td,{children:(0,s.jsx)(t.code,{children:"thoughtgate_amber_buffer_active"})}),(0,s.jsx)(t.td,{children:"\u2014"}),(0,s.jsx)(t.td,{children:"Active amber path buffers"})]}),(0,s.jsxs)(t.tr,{children:[(0,s.jsx)(t.td,{children:(0,s.jsx)(t.code,{children:"thoughtgate_amber_semaphore_available"})}),(0,s.jsx)(t.td,{children:"\u2014"}),(0,s.jsx)(t.td,{children:"Available amber path semaphore permits"})]}),(0,s.jsxs)(t.tr,{children:[(0,s.jsx)(t.td,{children:(0,s.jsx)(t.code,{children:"thoughtgate_stdio_active_servers"})}),(0,s.jsx)(t.td,{children:"\u2014"}),(0,s.jsx)(t.td,{children:"Active stdio server connections"})]}),(0,s.jsxs)(t.tr,{children:[(0,s.jsx)(t.td,{children:(0,s.jsx)(t.code,{children:"thoughtgate_config_loaded"})}),(0,s.jsx)(t.td,{children:"\u2014"}),(0,s.jsx)(t.td,{children:"Whether config is loaded (0 or 1)"})]})]})]}),"\n",(0,s.jsx)(t.h2,{id:"protocol-support-notes",children:"Protocol Support Notes"}),"\n",(0,s.jsxs)(t.ul,{children:["\n",(0,s.jsxs)(t.li,{children:[(0,s.jsx)(t.strong,{children:"OTLP protocol:"})," Only ",(0,s.jsx)(t.code,{children:"http/protobuf"})," is supported. gRPC (",(0,s.jsx)(t.code,{children:"grpc"}),") is ",(0,s.jsx)(t.strong,{children:"not"})," supported."]}),"\n",(0,s.jsxs)(t.li,{children:[(0,s.jsx)(t.strong,{children:"Sampling:"})," Only head sampling is supported. Tail sampling is not available."]}),"\n",(0,s.jsxs)(t.li,{children:[(0,s.jsx)(t.strong,{children:"Prometheus format:"})," OpenMetrics text format (compatible with Prometheus 2.x+)."]}),"\n",(0,s.jsxs)(t.li,{children:[(0,s.jsx)(t.strong,{children:"Cardinality management:"})," Tool names and server IDs are passed through a cardinality limiter to prevent metric explosion from dynamic values."]}),"\n"]})]})}function a(e={}){const{wrapper:t}={...(0,n.R)(),...e.components};return t?(0,s.jsx)(t,{...e,children:(0,s.jsx)(o,{...e})}):o(e)}}}]);